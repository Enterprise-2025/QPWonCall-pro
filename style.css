 /* QPWONCall v2 — style.css
   Tema scuro, UI compatta ma ariosa, focus su “prossima azione”.
   24x24 icons (stroke currentColor), tipografia Inter/system. */

/* ============= */
/* DESIGN TOKENS */
/* ============= */
:root{
  /* colori base */
  --bg: #0B0F14;
  --card: #0F1520;
  --border: #1F2837;
  --text: #E6EAF2;
  --muted: #9AA7B8;
  --muted-2: #667386;

  /* accenti */
  --primary: #3B82F6;
  --info: #60A5FA;
  --warn: #F59E0B;
  --danger: #EF4444;
  --success: #10B981;

  /* heat */
  --heat-cold: #38BDF8;
  --heat-warm: #FACC15;
  --heat-hot:  #22C55E;

  /* spazi */
  --s1: 4px; --s2: 8px; --s3: 12px; --s4: 16px; --s5: 24px; --s6: 32px; --s7: 48px;

  /* raggi & ombre */
  --r8: 8px; --r12: 12px; --r16: 16px;
  --shadow: 0 6px 20px rgba(0,0,0,.25);
  --shadow-hover: 0 10px 30px rgba(0,0,0,.35);

  /* tipografia */
  --h1: 24px; --h2: 18px; --body: 15px; --cap: 12px;

  /* transizioni */
  --t: 150ms ease;
}

/* ====== RESET LEGGERO ====== */
*{box-sizing:border-box}
html,body{height:100%}
html{color-scheme:dark}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:400 var(--body)/1.5 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
}
h1,h2,h3{margin:0 0 var(--s3)}
h1{font-size:var(--h1)}
h2{font-size:var(--h2)}
h3{font-size:16px}
p{margin:0 0 var(--s3)}
small,.small{font-size:var(--cap)}
.mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
.muted{color:var(--muted)}
.hide-mobile{display:inline}

/* ====== ICON ====== */
.icon{width:1.25rem;height:1.25rem;stroke:currentColor;fill:none;vertical-align:-0.2em}

/* ====== HEADER & TABS ====== */
.app-header{
  position:sticky; top:0; z-index:50;
  display:grid; grid-template-columns: 1fr auto auto;
  align-items:center; gap:var(--s4);
  padding:var(--s4) var(--s5);
  background:linear-gradient(0deg, rgba(11,15,20,0.6), rgba(11,15,20,0.6)), var(--bg);
  backdrop-filter:saturate(1.2) blur(6px);
  border-bottom:1px solid var(--border);
}
.brand{display:flex; align-items:center; gap:10px; font-weight:700}
.brand .muted{font-weight:400}

.tabs{display:flex; gap:6px; align-items:center; justify-self:center}
.tab{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; border:1px solid transparent; border-radius:999px;
  background:transparent; color:var(--muted); cursor:pointer; transition:all var(--t);
}
.tab:hover{border-color:var(--border); color:var(--text); background:#0d1420}
.tab.is-active{background:var(--card); color:var(--text); border-color:var(--border); box-shadow:var(--shadow)}
.tab .icon{opacity:.9}

.toolbar{display:flex; gap:8px; justify-self:end}

/* ====== BUTTONS ====== */
.btn{
  display:inline-flex; align-items:center; gap:8px; cursor:pointer;
  padding:10px 12px; border-radius:10px; border:1px solid var(--border);
  background:var(--card); color:var(--text); transition:all var(--t);
}
.btn:hover{box-shadow:var(--shadow-hover); transform:translateY(-1px)}
.btn:disabled{opacity:.5; cursor:not-allowed; box-shadow:none; transform:none}
.btn.primary{background:var(--primary); border-color:transparent; color:#fff}
.btn.primary:hover{filter:brightness(1.08)}
.btn.ghost{background:transparent}
.btn.danger{border-color:#2a1320; color:#ffd9df; background:#1a0d12}
.btn.xl{padding:14px 16px; font-weight:600; font-size:15px; width:100%; justify-content:center}

/* Icon-only */
.icon-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px; border-radius:10px; border:1px solid var(--border);
  background:transparent; color:var(--text); cursor:pointer; transition:all var(--t);
}
.icon-btn:hover{background:#0d1420; box-shadow:var(--shadow)}
.icon-btn.danger:hover{border-color:var(--danger); color:#ffd9df; background:#2a0f15}

/* ====== KPI BAR ====== */
.kpi-bar{
  position:sticky; top:68px; z-index:40;
  display:flex; gap:var(--s5); align-items:center; flex-wrap:wrap;
  padding:var(--s3) var(--s5); border-bottom:1px solid var(--border);
  background:linear-gradient(0deg, rgba(15,21,32,0.75), rgba(15,21,32,0.75)), var(--bg);
  backdrop-filter:saturate(1.2) blur(6px);
}
.kpi{min-width:120px}
.kpi-value{font-weight:700; font-size:18px}
.kpi-label{color:var(--muted); font-size:12px}

.quota{min-width:260px; flex:1}
.quota-top{display:flex; justify-content:space-between; align-items:center; color:var(--muted)}
.progress{width:100%; height:8px; background:#0c121d; border:1px solid var(--border); border-radius:999px; overflow:hidden; margin-top:6px}
.progress-bar{height:100%; background:linear-gradient(90deg, var(--primary), #7aa7ff)}

/* ====== MAIN VIEWS WRAPPER ====== */
.views{padding:var(--s5)}
.view{display:none}
.view.is-active{display:block}

/* ====== FILTER BAR ====== */
.filter-bar{
  display:flex; gap:var(--s3); align-items:center; margin-bottom:var(--s4)
}
.input-icon{position:relative; min-width:280px; flex:1}
.input-icon .icon{position:absolute; left:10px; top:50%; transform:translateY(-50%); color:var(--muted)}
.input-icon input{
  width:100%; padding:10px 12px 10px 36px; border-radius:10px; border:1px solid var(--border);
  background:var(--card); color:var(--text); outline:none; transition:border var(--t)
}
.input-icon input:focus{border-color:#2a3550}
.filters{display:flex; gap:8px}
.chip{
  display:inline-flex; align-items:center; gap:8px; height:32px; padding:0 12px;
  border-radius:999px; border:1px solid var(--border); background:transparent; color:var(--text);
  cursor:pointer; transition:all var(--t)
}
.chip:hover{background:#0d1420}
.spacer{flex:1}

/* ====== TODAY LIST ====== */
.list{display:flex; flex-direction:column; gap:10px}
.row{
  display:grid; grid-template-columns: auto 1fr auto; gap:var(--s4);
  align-items:center; padding:12px var(--s4); background:var(--card);
  border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow);
}
.lead-main .lead-title{margin:0 0 4px; font-size:16px}
.meta{color:var(--muted); font-size:12px}
.row-actions{display:flex; gap:8px}

/* heat badge */
.heat{
  display:inline-flex; align-items:center; gap:8px; padding:6px 10px;
  border-radius:999px; border:1px solid var(--border); background:#0d1420; font-size:12px
}
.heat .dot{width:8px;height:8px;border-radius:999px;display:inline-block}
.heat-cold{color:var(--heat-cold)}
.heat-cold .dot{background:var(--heat-cold)}
.heat-warm{color:var(--heat-warm)}
.heat-warm .dot{background:var(--heat-warm)}
.heat-hot{color:var(--heat-hot)}
.heat-hot .dot{background:var(--heat-hot)}

/* ====== ONE-LEAD ====== */
.focus-strip{
  position:sticky; top:118px; z-index:35;
  display:grid; grid-template-columns: 1fr auto auto; gap:var(--s4);
  align-items:center; padding:var(--s3) var(--s4); margin-bottom:var(--s4);
  background:linear-gradient(0deg, rgba(15,21,32,0.85), rgba(15,21,32,0.85)), var(--card);
  border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow);
}
.focus-diagnosi{display:flex; align-items:center; gap:8px; color:var(--muted)}
.focus-slots{display:flex; gap:8px}
.slot-pill{
  padding:8px 12px; border-radius:999px; border:1px solid var(--border); background:transparent; color:var(--text);
  cursor:pointer; transition:all var(--t)
}
.slot-pill:disabled{opacity:.5; cursor:not-allowed}
.slot-pill:hover{background:#0d1420}

.onelead-grid{
  display:grid; grid-template-columns: 1.2fr .8fr; gap:var(--s5)
}
.lead-left, .lead-right{display:flex; flex-direction:column; gap:var(--s4)}

.card{
  background:var(--card); border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow);
  padding:var(--s4)
}
.card-title{display:flex; align-items:center; gap:8px; margin-bottom:var(--s3)}
.card .subtitle{color:var(--muted)}

.title-row{display:flex; gap:12px; align-items:center; justify-content:space-between}
.lead-info{display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:var(--s3)}
.lead-info dt{color:var(--muted); font-size:12px}
.lead-info dd{margin:0}

.timeline{display:flex; flex-direction:column; gap:6px}
.tl-row{font-size:13px; color:#d7deea}

textarea,input,select{
  width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border);
  background:#0d1420; color:var(--text); outline:none; transition:border var(--t)
}
textarea:focus,input:focus,select:focus{border-color:#2a3550}

.actions-end{display:flex; justify-content:flex-end; gap:8px; margin-top:var(--s3)}
.actions-start{display:flex; justify-content:flex-start; gap:8px; margin-top:var(--s3)}

.preview .label{color:var(--muted); font-size:12px; margin-bottom:6px}
.preview-grid{display:grid; grid-template-columns:1fr 1fr; gap:var(--s4)}
.mini-actions{display:flex; gap:8px; margin-top:8px}

/* ====== PIPELINE (KANBAN) ====== */
.kanban{display:grid; grid-template-columns: repeat(4, 1fr); gap:var(--s4)}
.col{display:flex; flex-direction:column; gap:var(--s3)}
.col > header{font-weight:700; color:var(--muted); padding:8px 4px}
.col-list{display:flex; flex-direction:column; gap:var(--s3); min-height:200px; padding:6px; border:1px dashed #122033; border-radius:10px}

.lead-card{padding:0}
.lc-head{padding:12px var(--s4); border-bottom:1px solid var(--border)}
.lc-title{font-weight:600}
.lc-meta{color:var(--muted); font-size:12px; margin-top:4px}
.lc-actions{display:flex; gap:8px; padding:10px var(--s4)}

.lead-card.dragging{opacity:.6}
.col.dragover .col-list{background:#0c121d}

/* ====== LIBRERIA ====== */
.library{display:flex; flex-direction:column; gap:var(--s6)}
.lib-head{display:flex; align-items:baseline; gap:12px}
.template-grid{display:grid; grid-template-columns:repeat(3, 1fr); gap:var(--s4)}
.template-card{background:var(--card); border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow); padding:var(--s4)}
.template-card header{font-weight:700; margin-bottom:var(--s3)}
.temp-body{display:grid; grid-template-columns:1fr; gap:var(--s3)}
.temp-body pre{margin:0; white-space:pre-wrap}
.temp-actions{display:flex; gap:8px; margin-top:var(--s3)}

.cases-grid{display:grid; grid-template-columns:repeat(3, 1fr); gap:var(--s4)}
.case-card{background:var(--card); border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow); padding:var(--s4); display:flex; flex-direction:column; gap:var(--s3)}
.case-card header{font-weight:700}
.case-card ul{margin:0; padding-left:18px; display:flex; flex-direction:column; gap:6px}
.case-actions{display:flex; gap:8px; flex-wrap:wrap}

/* links di utilità */
.link{
  background:none; border:none; color:var(--info); cursor:pointer; padding:0; text-decoration:underline;
}
.link:hover{opacity:.85}

/* ====== IMPOSTAZIONI ====== */
.settings-grid{display:grid; grid-template-columns:1.2fr 1.2fr; gap:var(--s5)}
.form-grid{display:grid; grid-template-columns:1fr 1fr; gap:var(--s3)}
.form-grid.two{grid-template-columns:1fr 1fr}
.fieldset{border:1px dashed #203049; border-radius:12px; padding:var(--s4); margin-top:var(--s3)}
.fieldset legend{color:var(--muted); padding:0 var(--s2)}
.wide{grid-column:1 / -1}

/* ====== MODALI (dialog) ====== */
dialog.modal{
  border:none; padding:0; border-radius:14px; background:transparent; max-width:min(860px, 92vw);
}
dialog::backdrop{background:rgba(0,0,0,.5)}
.modal-content{
  background:var(--card); border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow-hover);
  padding:var(--s4); color:var(--text);
}
.modal-head{
  display:flex; justify-content:space-between; align-items:center; gap:var(--s4); margin-bottom:var(--s3);
}
.modal-foot{display:flex; justify-content:flex-end; gap:8px; margin-top:var(--s4)}
.slots{display:flex; gap:var(--s3); margin:var(--s3) 0}
.slot-cta{
  flex:1; padding:14px 16px; border-radius:12px; background:#0d1420; border:1px solid var(--border); color:var(--text);
  cursor:pointer; transition:all var(--t); text-align:center; font-weight:600;
}
.slot-cta:hover{background:#0f1b2e}

/* ====== TOASTS ====== */
.toasts{
  position:fixed; top:12px; right:12px; display:flex; flex-direction:column; gap:8px; z-index:100;
}
.toast{
  opacity:0; transform:translateY(-6px);
  padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:var(--card); color:var(--text);
  box-shadow:var(--shadow); transition:all var(--t);
}
.toast.show{opacity:1; transform:translateY(0)}
.toast.info{border-color:#1b2a45}
.toast.success{border-color:#133025; background:#0f1e18}
.toast.danger{border-color:#3b1a20; background:#1a1114}

/* ====== PROGRESSIVE STATES ====== */
:focus-visible{
  outline: 2px solid var(--primary);
  outline-offset: 2px;
  border-radius: 6px;
}
input:disabled, textarea:disabled, button:disabled{opacity:.6}

/* ====== RESPONSIVE ====== */
@media (max-width: 1279px){
  .onelead-grid{grid-template-columns:1fr}
  .preview-grid{grid-template-columns:1fr}
  .kanban{grid-template-columns:repeat(2, 1fr)}
  .template-grid{grid-template-columns:repeat(2, 1fr)}
  .cases-grid{grid-template-columns:repeat(2, 1fr)}
  .settings-grid{grid-template-columns:1fr}
}

@media (max-width: 767px){
  .hide-mobile{display:none}
  .app-header{grid-template-columns: 1fr auto}
  .tabs{justify-self:start; order:3; overflow:auto; scrollbar-width:none}
  .tabs::-webkit-scrollbar{display:none}
  .kpi-bar{top:64px}
  .views{padding:var(--s4)}

  .row{grid-template-columns:1fr auto; gap:var(--s3)}
  .row > .heat{display:none}

  .kanban{grid-template-columns:1fr}
  .template-grid, .cases-grid{grid-template-columns:1fr}

  /* Action Dock sticky in basso */
  .lead-right .action-dock{
    position:sticky; bottom:0; z-index:30; background:linear-gradient(0deg, rgba(11,15,20,0.96), rgba(11,15,20,0.96)), var(--bg);
    border-top:1px solid var(--border); padding:var(--s3); box-shadow:0 -6px 20px rgba(0,0,0,.25)
  }
  .btn.xl{font-size:14px}
}

/* ====== MISC ====== */
.label{color:var(--muted); font-size:12px}
hr{border:0; border-top:1px solid var(--border); margin:var(--s4) 0}

/* ====== ACCESSIBILITÀ COLORE ====== */
.btn.primary, .slot-cta{color:#fff}
